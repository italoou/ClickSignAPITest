<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- <script src='https://raw.githubusercontent.com/clicksign/embedded/main/build/embedded.js'></script> -->
  </head>
  <body>
    <!-- <p> url para documento </p> -->

    <!-- <input id="request" /> -->
    <input type="button" value="Load" onclick="run()" />
    
    <div id="container" style="height: 600px"></div>

    <!-- <script src='..\src\embedded.js'></script> -->

    <script type="">
      function Clicksign(i) {
        "use strict";
        function n(n) {
          var t;
          (e[(t = n).name || t] || []).forEach(function (t) {
            t(n.data);
          });
        }
        var o,
          r,
          t = window.location.protocol + "//" + window.location.host,
          e = {},
          u = function (t) {
            n(t.data);
          };
        return {
          endpoint: "https://app.clicksign.com",
          origin: t,
          mount: function (t) {
            var n = "/sign/" + i,
              e = "?embedded=true&origin=" + this.origin,
              e = this.endpoint + n + e;
            return (
              (r = document.getElementById(t)),
              (o = document.createElement("iframe")).setAttribute("src", e),
              o.setAttribute("style", "width: 100%; height: 100%;"),
              o.setAttribute("allow", "camera"),
              window.addEventListener("message", u),
              r.appendChild(o)
            );
          },
          unmount: function () {
            return (
              o &&
                (r.removeChild(o),
                (o = r = null),
                window.removeEventListener("message", n)),
              !0
            );
          },
          on: function (t, n) {
            return e[t] || (e[t] = []), e[t].push(n);
          },
          trigger: n,
        };
      }
    </script>

    <script type="text/javascript">
      var widget
      //     input = document.getElementById('request_signature_key');
      run();
      function run () {
        var request_signature_key = '<%= request_signature_key %>';
        if(widget) { widget.unmount(); }

        widget = new Clicksign(request_signature_key);

        widget.endpoint = 'https://sandbox.clicksign.com';
        widget.origin = 'https://google.com';
        widget.mount('container');

        widget.on('loaded', function(ev) { console.log('loaded!'); });
        widget.on('signed', function(ev) { console.log('signed!'); return widget.unmount();});
        widget.on('resized', function(height) {
          console.log('resized!');
          document.getElementById('container').style.height = height+'px';
        });
      };
    </script>
  </body>
</html>
